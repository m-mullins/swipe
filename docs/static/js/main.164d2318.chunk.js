(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(t,e,n){t.exports=n(42)},24:function(t,e,n){},36:function(t,e,n){},42:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),l=n(11),o=n.n(l),i=(n(24),n(3)),c=n(12),s=n(13),d=n(17),u=n(14),f=n(18),h=n(2),m=n.n(h),g=(n(36),n(15)),b=n.n(g),y=n(16),v=n.n(y),k=function(t){function e(t){var n;return Object(c.a)(this,e),(n=Object(d.a)(this,Object(u.a)(e).call(this,t))).fullStack=r.a.createRef(),n.lastConfidence=0,n.cards=[],n.fetchingMembers=!1,n.after=null,n.POST_LIMIT=12,n.LOWER_COUNT=5,n.CARD_DISPLAY=3,n.requestId=0,n.componentDidUpdate=function(){if(console.log(n.fullStack),null!==n.fullStack&&null!==n.fullStack.current){var t=Object(i.a)(n.fullStack.current.children),e=!0,a=!1,r=void 0;try{for(var l,o=t[Symbol.iterator]();!(e=(l=o.next()).done);e=!0){var c=l.value;console.log(c.id),c&&c.id&&n.state.stack&&!n.cards.includes(c.id)&&(console.log("Stackifying element "+c.id),n.state.stack.createCard(c,!0),n.cards.push(c.id))}}catch(s){a=!0,r=s}finally{try{e||null==o.return||o.return()}finally{if(a)throw r}}}},n.throwCard=function(t,e){if(console.log(t,e,n.fullStack),!(n.state.members.length<1||null===n.fullStack||null===n.fullStack.current)){var a=n.state.members[0],r=Object(i.a)(n.fullStack.current.children),l=!0,o=!1,c=void 0;try{for(var s,d=r[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var u=s.value;if(console.log(u.id),u&&u.id&&n.state.stack&&u.id===a.key){var f=n.state.stack.getCard(u);f&&f.throwOut(0,0)}}}catch(h){o=!0,c=h}finally{try{l||null==d.return||d.return()}finally{if(o)throw c}}}},n.handleClick=function(t){console.log("handleClick",t);var e=n.state.members;e.length<=0||(console.log("mem",e),console.log("removigin",e.shift().key),n.setState({members:e}),n.fetchPosts())},n.dragEnd=function(t){if(console.log(t),!n.lastConfidence){var e=!0,a=!1,r=void 0;try{for(var l,o=t.target.attributes[Symbol.iterator]();!(e=(l=o.next()).done);e=!0){var i=l.value;"data-lity-target"===i.localName&&b()(i.textContent,{},t.target)}}catch(c){a=!0,r=c}finally{try{e||null==o.return||o.return()}finally{if(a)throw r}}}},n.fetchPosts=function(){console.log("fetchPosts??? ",n.state.members.length),n.state.members.length>n.LOWER_COUNT||n.fetchingMembers||(console.log("frethcing data pospotspop??? ",n.state.members.length),n.fetchingMembers=!0,n.requestId++,fetch("https://www.reddit.com/r/aww/.json?limit="+n.POST_LIMIT+(null!==n.after?"&after=".concat(n.after):"")).then(function(t){return t.json()}).then(function(t){console.log("data",t),n.after=t.data.after,t.data.children&&(console.log("children",t.data.children),n.parsePosts(t.data.children),n.fetchingMembers=!1,n.fetchPosts())}))},n.parsePosts=function(t){var e=[],a=!0,r=!1,l=void 0;try{for(var o,c=t[Symbol.iterator]();!(a=(o=c.next()).done);a=!0){var s=o.value,d={},u=s.data,f=u.stickied,h=u.subreddit,m=u.num_comments,g=u.id,b=u.url,y=u.distinguished,v=u.thumbnail,k=u.title,p=null!=b.match(/\.(jpeg|png|gif|jpg)$/);!f&&"moderator"!==y&&p&&"self"!==v&&(d.title=k,d.id=g,d.key="render-".concat(g,"-").concat(n.requestId),d.imgUrl=b,d.thumbnail=v,d.num_comments=m,d.subreddit=h,e.push(d))}}catch(w){r=!0,l=w}finally{try{a||null==c.return||c.return()}finally{if(r)throw l}}n.setState({members:Object(i.a)(n.state.members).concat(e)})},n.handleThrowEnd=function(t){n.handleClick(t.target.id,t.throwDirection)},n.shuffle=function(t){for(var e=t.length-1;e>0;e--){var n=Math.floor(Math.random()*(e+1)),a=[t[n],t[e]];t[e]=a[0],t[n]=a[1]}return t},n.state={members:[],stack:null},n}return Object(f.a)(e,t),Object(s.a)(e,[{key:"componentDidMount",value:function(){this.fetchPosts()}},{key:"render",value:function(){var t=this;return r.a.createElement("div",{className:"App"},r.a.createElement("div",{id:"viewport"},r.a.createElement("p",null,console.log(this.state.members)),this.state.members&&this.state.members.length>2&&r.a.createElement("div",{style:{display:"contents"}},r.a.createElement(m.a,{style:{display:"none"},setStack:function(e){return t.setState({stack:e})},throwout:this.handleThrowEnd.bind(this),dragend:this.dragEnd.bind(this),config:{allowedDirections:[m.a.DIRECTION.LEFT,m.a.DIRECTION.RIGHT],throwOutConfidence:function(e,n,a){var r=Math.min(Math.abs(e)/a.offsetWidth/.5,1),l=Math.min(Math.abs(n)/a.offsetHeight,1);return t.lastConfidence=Math.max(r,l),t.lastConfidence}}},r.a.createElement("div",{style:{display:"none"}})),r.a.createElement("div",{ref:this.fullStack,className:"stack"},this.state.members&&this.state.members.slice(0,this.CARD_DISPLAY).map(function(t){return r.a.createElement("div",{className:"card",id:t.key,key:t.key,"data-lity-target":t.imgUrl,"data-lity-desc":'" data-lity-close junk="',style:{backgroundColor:"gray",background:'url("'+t.imgUrl+'") no-repeat center center',backgroundSize:"cover",display:"flex",flexDirection:"column",justifyContent:"space-between"}})})))),r.a.createElement(v.a,{handleKeys:["space"],onKeyEvent:this.throwCard.bind(this)}))}}]),e}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[19,2,1]]]);
//# sourceMappingURL=main.164d2318.chunk.js.map