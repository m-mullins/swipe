(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t,n){e.exports=n(38)},23:function(e,t,n){},35:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(11),s=n.n(o),l=(n(23),n(5)),i=n(12),c=n(13),d=n(16),m=n(14),u=n(17),h=n(2),f=n.n(h),g=(n(35),n(15)),b=n.n(g),y=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).fullStack=r.a.createRef(),n.lastConfidence=0,n.cards=[],n.fetchingMembers=!1,n.after=null,n.POST_LIMIT=12,n.LOWER_COUNT=5,n.requestId=0,n.componentDidUpdate=function(){if(console.log(n.fullStack),null!==n.fullStack&&null!==n.fullStack.current){var e=Object(l.a)(n.fullStack.current.children),t=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){var i=o.value;console.log(i.id),i&&i.id&&n.state.stack&&!n.cards.includes(i.id)&&(console.log("Stackifying element "+i.id),n.state.stack.createCard(i,!0),n.cards.push(i.id))}}catch(c){a=!0,r=c}finally{try{t||null==s.return||s.return()}finally{if(a)throw r}}}},n.handleClick=function(e){console.log("handleClick",e);var t=n.state.members;t.length<=0||(console.log("mem",t),console.log("removigin",t.shift().key),n.setState({members:t}),n.fetchPosts())},n.dragEnd=function(e){if(console.log(e),!n.lastConfidence){var t=!0,a=!1,r=void 0;try{for(var o,s=e.target.attributes[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){var l=o.value;"data-lity-target"===l.localName&&b()(l.textContent,{},e.target)}}catch(i){a=!0,r=i}finally{try{t||null==s.return||s.return()}finally{if(a)throw r}}}},n.fetchPosts=function(){console.log("fetchPosts??? ",n.state.members.length),n.state.members.length>n.LOWER_COUNT||n.fetchingMembers||(console.log("frethcing data pospotspop??? ",n.state.members.length),n.fetchingMembers=!0,n.requestId++,fetch("https://www.reddit.com/r/aww/.json?limit="+n.POST_LIMIT+(null!==n.after?"&after=".concat(n.after):"")).then(function(e){return e.json()}).then(function(e){console.log("data",e),n.after=e.data.after,e.data.children&&(console.log("children",e.data.children),n.parsePosts(e.data.children),n.fetchingMembers=!1,n.fetchPosts())}))},n.parsePosts=function(e){var t=[],a=!0,r=!1,o=void 0;try{for(var s,i=e[Symbol.iterator]();!(a=(s=i.next()).done);a=!0){var c=s.value,d={},m=c.data,u=m.stickied,h=m.subreddit,f=m.num_comments,g=m.id,b=m.url,y=m.distinguished,k=m.thumbnail,v=m.title,p=null!=b.match(/\.(jpeg|png|gif|jpg)$/);!u&&"moderator"!==y&&p&&"self"!==k&&(d.title=v,d.id=g,d.key="render-".concat(g,"-").concat(n.requestId),d.imgUrl=b,d.thumbnail=k,d.num_comments=f,d.subreddit=h,t.push(d))}}catch(w){r=!0,o=w}finally{try{a||null==i.return||i.return()}finally{if(r)throw o}}n.setState({members:Object(l.a)(n.state.members).concat(t)})},n.handleThrowEnd=function(e){n.handleClick(e.target.id,e.throwDirection)},n.shuffle=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),a=[e[n],e[t]];e[t]=a[0],e[n]=a[1]}return e},n.state={members:[],stack:null},n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.fetchPosts()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement("div",{id:"viewport"},r.a.createElement("p",null,console.log(this.state.members)),this.state.members&&this.state.members.length>2&&r.a.createElement("div",{style:{display:"contents"}},r.a.createElement(f.a,{style:{display:"none"},setStack:function(t){return e.setState({stack:t})},throwout:this.handleThrowEnd.bind(this),dragend:this.dragEnd.bind(this),config:{allowedDirections:[f.a.DIRECTION.LEFT,f.a.DIRECTION.RIGHT],throwOutConfidence:function(t,n,a){var r=Math.min(Math.abs(t)/a.offsetWidth/.5,1),o=Math.min(Math.abs(n)/a.offsetHeight,1);return e.lastConfidence=Math.max(r,o),e.lastConfidence}}},r.a.createElement("div",{style:{display:"none"}})),r.a.createElement("div",{ref:this.fullStack,className:"stack"},r.a.createElement("div",{className:"card",id:this.state.members[0].key,key:this.state.members[0].key,"data-lity-target":this.state.members[0].imgUrl,"data-lity-desc":'" data-lity-close junk="',style:{backgroundColor:"gray",background:'url("'+this.state.members[0].imgUrl+'") no-repeat center center',backgroundSize:"cover",display:"flex",flexDirection:"column",justifyContent:"space-between"}}),r.a.createElement("div",{className:"card",id:this.state.members[1].key,key:this.state.members[1].key,"data-lity-target":this.state.members[1].imgUrl,"data-lity-desc":'" data-lity-close junk="',style:{backgroundColor:"gray",background:'url("'+this.state.members[1].imgUrl+'") no-repeat center center',backgroundSize:"cover",display:"flex",flexDirection:"column",justifyContent:"space-between"}})))))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[18,2,1]]]);
//# sourceMappingURL=main.beb706d6.chunk.js.map